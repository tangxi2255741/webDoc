# Redis的数据类型？

 	1. 字符串（Strings），字符串是Redis值的最基础的类型。
 	2. 列表（Lists)，List列表是简单的字符串列表，按照插入顺序排序
 	3. 集合(Sets)，集合（Set）是一个无序的字符串集合
 	4. 哈希（Hashes），Hashes是字符串字段和字符串值之间的映射,因此他们是展现对象的完美数据类型。
 	5. 有序集合（Sorted Sets），有序集合与普通集合非常相似，是一个没有重复元素的字符串集合。

# Redis主从复制原理

> 可分为全量同步和增量同步

### 全量同步

 	1. 从服务器向主服务器发送同步请求
	2. 主服务器接收到请求以后，通过BGSAVE命令生成RDB文件，并缓存后面执行的所有写操作
	3. 主服务器执行完成BGSAVE操作后，向所有从服务器发送快照文件，并继续缓存期间的写操作；
	4. 从服务器收到快照文件后，丢弃所有旧数据，载入收到的快照；
	5. 主服务器发送完成快照以后，向所有从服务器发送缓存的写数据；
	6. 从服务器完成快照载入，并执行主服务器的写操作；

### 增量同步

1. 主服务器一有写操作就向所有从服务器发送写命令；

2. 从服务器接收并执行收到的写命令；

### 主从同步策略

首先尝试增量同步，如果不成功，要求从服务器执行全量同步；



# Redis持久化的两种方式

## RDB快照（Relational Database）

把Redis内存中的数据状态保存到磁盘的RBD文件中，如果redis重启或挂了以后就加载RDB文件内容到redis；

### RDB文件的生成方式

 	1. 通过SAVE或BGSAVE命令生成
	2. 通过配置自动生成

### SAVE和BGSAVE的区别

save直接调用rdbSave函数，阻塞redis主进程，直到保存完成，期间服务器不处理任何客户端请求；

bgsave会fork出一个子进程来执行rdbSave函数，期间服务器仍然可以处理客户端请求；

## AOF（Append only file）*

将Redis的写命令保存到AOF（追加式文件）中