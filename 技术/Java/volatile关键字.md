# 并发编程的三个概念

- 原子性：一个操作或多个操作，要么都执行，要么都不执行；
- 有序性：按代码先后循序执行；
- 可见性：多个线程访问同一个变量时，如果一个线程修改了值，其他线程能立刻看到修改后的值；

# 指令重排序

​	处理器为了提高程序运行效率，会对输入代码进行优化，不保证一定按代码先后顺序执行，但保证
最终结果一致，在单线程中没问题，在多线程中就会出问题；

# 共享变量

被多个线程访问的变量

# volatile关键字

1. 保证不同线程对共享变量的可见性
2. 不允许指令重排序，一定程度上保证有序性
3. 不能保证原子性

# volatile关键字实现原理

1、可见性
	处理器为了提高处理速度，不直接与内存进行通信，而是将系统内存数据读到内部缓存中再进行操作。
对声明了volatile变量进行写操作时，JVM会向处理器发送一条Lock前缀的指令，将这个变量所在缓存的数据
写到系统内存，这样保证了如果其他线程对该变量进行修改，会立即更新到系统内存。

1、有序性
	Lock前缀指令实际上相当于一个内存屏障，确保指令重排序时后面的指令不会排到内存屏障之前，执行到内存屏障时它前面的操作都全部执行完成了。