# 常见索引

## PRIMARY KEY（主键索引）

ALTER TABLE `table_name` ADD PRIMARY KEY ( `col` ) 

它 是一种特殊的唯一索引，不允许有空值；

## UNIQUE(唯一索引) 

ALTER TABLE `table_name` ADD uniq_col (`col`)

索引列的值必须唯一，但允许有空值；

## INDEX(普通索引)

ALTER TABLE `table_name` ADD INDEX idx_col (`col`)

## FULLTEXT(全文索引)

ALTER TABLE `table_name` ADD FULLTEXT ( `col` )

仅可用于 MyISAM 表，针对较大的数据，生成全文索引很耗时好空间；

## 组合索引

ALTER TABLE `table_name` ADD INDEX idx_col1_col2_col3 (`col1`, `col2`, `col3` ) 

为了更多的提高mysql效率可建立组合索引，遵循”最左前缀“原则。创建复合索引时应该将**最常用（频率）**作限制条件的列放在**最左边**，依次递减；



## 如何选择索引的数据类型
MySQL支持很多数据类型，选择合适的数据类型存储数据对性能有很大的影响。通常来说，可以遵循以下一些指导原则：

1. 越小的数据类型通常更好：越小的数据类型通常在磁盘、内存和CPU缓存中都需要更少的空间，处理起来更快。
2. 简单的数据类型更好：整型数据比起字符，处理开销更小，因为字符串的比较更复杂。在MySQL中，应该用内置的日期和时间数据类型，而不是用字符串来存储时间；以及用整型数据类型存储IP地址。
3. 尽量避免NULL：应该指定列为NOT NULL，除非你想存储NULL。在MySQL中，含有空值的列很难进行查询优化，因为它们使得索引、索引的统计信息以及比较运算更加复杂。你应该用0、一个特殊的值或者一个空串代替空值。



## 聚集索引与非聚集索引的区别**?**

1、聚集索引（一般为主键）数据行的物理顺序和列植逻辑顺序相同，一个表只能拥有一个聚集索引，可以有多个非聚集索引；

2、使用非聚集索引查询，查询列中包含了其他该索引没有覆盖的列还得进行二次查询，会影响查询性能；

3、聚集索引查询效率更高，但由于要移动对应数据的物理位置，写入性能并不高；

 

## 为什么在主键上创建聚集索引比创建非聚集索引要慢？

由于主键的唯一性约束，在插入数据时要保证不能重复。聚集索引由于索引叶节点就是数据页，要检查数据唯一性就得遍历所有数据节点。而非聚集索引上已经包含了主键值，所以查找主键唯一性就只需要遍历所有索引页就可以了。